(()=>{var e={};e.id=815,e.ids=[815],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7310:e=>{"use strict";e.exports=require("url")},6920:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c});var a=s(7096),r=s(6132),l=s(7284),i=s.n(l),n=s(2564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["graph",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9819)),"/Users/benlittle/Desktop/Stuff/Projects/AXL/OrgGraphUI/app/graph/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6662)),"/Users/benlittle/Desktop/Stuff/Projects/AXL/OrgGraphUI/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/benlittle/Desktop/Stuff/Projects/AXL/OrgGraphUI/app/graph/page.tsx"],m="/graph/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/graph/page",pathname:"/graph",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1171:(e,t,s)=>{Promise.resolve().then(s.bind(s,4547))},4547:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>GraphPage});var a=s(784),r=s(2168),l=s(2724),i=s(4034),n=s(9885),o=s(6055);function calculateTaskCompletion(e){if(0===e.length)return 0;let t=e.filter(e=>"completed"===e.status).length,s=e.filter(e=>"in_progress"===e.status).length;return(t+.5*s)/e.length}function calculateWeight(e,t,s=1){let a=Math.max(1,e);if(!t||0===t.length)return a;let r=t.reduce((e,t)=>{switch(t.priority.toLowerCase()){case"high":return e+1.5;case"medium":return e+1.2;default:return e+1}},0)/t.length;return a*r*Math.max(1,4-s)}function getAllTasksFromCategory(e){return e.subcategories.reduce((e,t)=>e.concat(t.tasks),[])}function convertToGraphData(e){let t=[],s=[],a={id:"root",name:"CodeAid Business Processes",level:0,completion:e.summary.statusCounts.completed/e.summary.totalTasks,weight:calculateWeight(e.summary.totalTasks,[],0),isLeaf:!1,originalNode:e.summary};return t.push(a),e.categories.forEach(e=>{let a=getAllTasksFromCategory(e),r=calculateTaskCompletion(a),l={id:`category-${e.id}`,name:e.name,level:1,completion:r,weight:calculateWeight(e.totalTasks,a,1),isLeaf:!1,originalNode:e};t.push(l),s.push({source:"root",target:l.id,strength:1}),e.subcategories.forEach(e=>{let a=calculateTaskCompletion(e.tasks),r={id:`subcategory-${e.id}`,name:e.name,level:2,completion:a,weight:calculateWeight(e.tasks.length,e.tasks,2),isLeaf:0===e.tasks.length,originalNode:e};t.push(r),s.push({source:l.id,target:r.id,strength:.5}),e.tasks.forEach(e=>{let a="completed"===e.status.toLowerCase()?1:"in_progress"===e.status.toLowerCase()?.5:0,l={id:`task-${e.id}`,name:e.name,level:3,completion:a,weight:calculateWeight(1,[e],3),isLeaf:!0,originalNode:e};t.push(l),s.push({source:r.id,target:l.id,strength:1/3})})})}),{nodes:t,links:s}}function getCompletionColor(e){return 0===e?"#ef4444":1===e?"#10b981":`hsl(${120*e}, 70%, 50%)`}function GraphVisualization({width:e=800,height:t=600,data:s,onNodeClick:r}){let l=(0,n.useRef)(null),i=(0,n.useRef)(null),c=(0,n.useRef)(null),[d,m]=(0,n.useState)(null),[u,h]=(0,n.useState)({width:e,height:t});(0,n.useEffect)(()=>{let updateDimensions=()=>{if(i.current){let e=i.current.getBoundingClientRect();h({width:e.width||800,height:e.height||600})}};return updateDimensions(),window.addEventListener("resize",updateDimensions),()=>window.removeEventListener("resize",updateDimensions)},[]);let x=(0,n.useCallback)(()=>{if(!s||!s.nodes||!s.links)return{nodes:[],links:[]};let e=JSON.parse(JSON.stringify(s.nodes)),t=JSON.parse(JSON.stringify(s.links));return{nodes:e,links:t}},[s]),p=(0,n.useCallback)((e,t)=>{let s=o.Ys("body").selectAll(".graph-tooltip").data([null]).join("div").attr("class","graph-tooltip").style("position","absolute").style("background","rgba(0, 0, 0, 0.9)").style("color","white").style("padding","8px 12px").style("border-radius","4px").style("font-size","12px").style("pointer-events","none").style("z-index","1000").style("opacity",0);s.html(`
      <div><strong>${t.name}</strong></div>
      <div>Level: ${t.level}</div>
      <div>Completion: ${Math.round(100*t.completion)}%</div>
      <div>Weight: ${t.weight.toFixed(1)}</div>
    `).style("left",e.pageX+10+"px").style("top",e.pageY-10+"px").transition().duration(200).style("opacity",1)},[]),g=(0,n.useCallback)(()=>{o.Ys(".graph-tooltip").transition().duration(200).style("opacity",0).remove()},[]),f=(0,n.useCallback)(e=>{e.each(function(e){let t=o.Ys(this),s=Math.max(12,6*Math.sqrt(e.weight)),a=Math.max(11,16-2*e.level)*Math.min(1.5,Math.sqrt(e.weight)/3),r=e.name.split(/\s+/),l=Math.max(8,Math.floor(s/3)),i=[],n="";r.forEach(e=>{(n+" "+e).length<=l?n=n?n+" "+e:e:(n&&i.push(n),n=e)}),n&&i.push(n);let c=i.slice(0,3);i.length>3&&(c[2]=c[2].substring(0,l-3)+"..."),c.forEach((r,l)=>{t.append("text").text(r).attr("font-size",`${a}px`).attr("font-weight",e.level<=1?"bold":"normal").attr("text-anchor","middle").attr("dy",s+18+l*a*1.1).attr("fill","#000000").attr("stroke","#ffffff").attr("stroke-width","1").attr("pointer-events","none").style("paint-order","stroke fill")})})},[]),v=(0,n.useCallback)(()=>{if(!l.current)return;let{nodes:e,links:t}=x();if(!e.length)return;let{width:s,height:a}=u;o.Ys(l.current).select("svg").remove();let i=o.Ys(l.current).attr("width",s).attr("height",a).style("background","radial-gradient(circle, #f8fafc 0%, #f1f5f9 100%)");i.selectAll("*").remove();let n=i.append("g"),h=o.sPX().scaleExtent([.1,4]).on("zoom",e=>{n.attr("transform",e.transform)});i.call(h);let v=o.CRH.translate(s/2,a/2).scale(.25).translate(-s/2,-a/2);i.call(h.transform,v);let j=o.A4v(e).force("link",o.Fsl(t).id(e=>e.id).distance(e=>80+(e.source.level+e.target.level)*20).strength(.8)).force("charge",o.q5i().strength(e=>{let t=Math.max(1,3-e.level),s=Math.sqrt(e.weight);return -400*t*s})).force("center",o.wqt(s/2,a/2)).force("collision",o.Hh().radius(e=>Math.max(15,6*Math.sqrt(e.weight)+4)).strength(.8)).alphaDecay(.02).velocityDecay(.4);c.current=j;let y=n.append("g").attr("class","links"),N=y.selectAll("line").data(t).join("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",e=>Math.max(1,3-Math.max(e.source.level,e.target.level))),b=n.append("g").attr("class","nodes"),w=b.selectAll("g").data(e).join("g").attr("class","node");w.append("circle").attr("r",e=>Math.max(12,6*Math.sqrt(e.weight))).attr("fill",e=>getCompletionColor(e.completion)).attr("stroke","#fff").attr("stroke-width",1.5).attr("opacity",.9),f(w);let k=o.ohM().on("start",(e,t)=>{e.active||j.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",(e,t)=>{t.fx=e.x,t.fy=e.y}).on("end",(e,t)=>{e.active||j.alphaTarget(0),t.fx=null,t.fy=null});w.call(k),w.on("mouseover",function(e,t){o.Ys(this).select("circle").transition().duration(200).attr("r",Math.max(15,6*Math.sqrt(t.weight)+3)).attr("opacity",1),p(e,t)}).on("mouseout",function(e,t){o.Ys(this).select("circle").transition().duration(200).attr("r",Math.max(12,6*Math.sqrt(t.weight))).attr("opacity",.9),g()}).on("click",(e,t)=>{e.stopPropagation(),w.selectAll("circle").attr("stroke","#fff").attr("stroke-width",1.5),o.Ys(e.currentTarget).select("circle").attr("stroke","#007acc").attr("stroke-width",3),m(t.id===d?null:t.id),r&&r(t)}),i.on("click",e=>{e.target===e.currentTarget&&(m(null),w.selectAll("circle").attr("stroke","#fff").attr("stroke-width",1.5))}),j.on("tick",()=>{N.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),w.attr("transform",e=>`translate(${e.x},${e.y})`)})},[s,u,d,r,p,g,f,x]);return(0,n.useEffect)(()=>(v(),()=>{c.current&&c.current.stop(),o.Ys(".graph-tooltip").remove()}),[v]),(0,a.jsxs)("div",{ref:i,className:"w-full h-full min-h-[600px] relative overflow-hidden",style:{background:"radial-gradient(circle, #f8fafc 0%, #f1f5f9 100%)"},children:[a.jsx("svg",{ref:l,className:"w-full h-full",style:{cursor:"grab"}}),a.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-sm",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsx("div",{children:"• Drag nodes to reposition"}),a.jsx("div",{children:"• Scroll to zoom in/out"}),a.jsx("div",{children:"• Click nodes to select"}),a.jsx("div",{children:"• Hover for details"})]})}),(0,a.jsxs)("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-sm",children:[a.jsx("div",{className:"text-sm font-medium mb-2",children:"Completion Status"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Not Started (0%)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-500"}),a.jsx("span",{className:"text-sm text-gray-600",children:"In Progress (50%)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Completed (100%)"})]})]})]})]})}var c=s(552);function GraphPage(){let[e,t]=(0,n.useState)(null),s=convertToGraphData(c);return(0,a.jsxs)(i.Hn,{children:[a.jsx(r.S,{}),(0,a.jsxs)(i.kV,{children:[a.jsx(l.H,{}),a.jsx("div",{className:"flex flex-1 flex-col",children:(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4 lg:gap-6 lg:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Process Graph"}),a.jsx("p",{className:"text-muted-foreground",children:"Interactive visualization of all business processes and their relationships"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.summary.totalCategories}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Categories"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:c.summary.totalSubcategories}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Subcategories"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.summary.totalTasks}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Tasks"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-1 gap-4",children:[a.jsx("div",{className:"flex-1 rounded-lg border bg-card text-card-foreground shadow-sm",children:a.jsx(GraphVisualization,{data:s,onNodeClick:e=>{t(e)}})}),e&&a.jsx("div",{className:"w-80 rounded-lg border bg-card text-card-foreground shadow-sm p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[0===e.level&&"Root Process",1===e.level&&"Category",2===e.level&&"Subcategory",3===e.level&&"Task"]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Completion"}),(0,a.jsxs)("span",{className:"text-sm font-semibold",children:[Math.round(100*e.completion),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${100*e.completion}%`}})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Weight"}),a.jsx("span",{className:"text-sm font-semibold",children:e.weight.toFixed(1)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Type"}),a.jsx("span",{className:"text-sm",children:e.isLeaf?"Leaf Node":"Parent Node"})]}),3===e.level&&e.originalNode&&(0,a.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Status"}),a.jsx("span",{className:`text-sm px-2 py-1 rounded-full text-xs font-medium ${"completed"===e.originalNode.status?"bg-green-100 text-green-800":"in_progress"===e.originalNode.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.originalNode.status.replace("_"," ")})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Priority"}),a.jsx("span",{className:`text-sm px-2 py-1 rounded-full text-xs font-medium ${"high"===e.originalNode.priority?"bg-red-100 text-red-800":"medium"===e.originalNode.priority?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:e.originalNode.priority})]}),e.originalNode.assignee&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Assignee"}),a.jsx("span",{className:"text-sm",children:e.originalNode.assignee})]})]}),1===e.level&&e.originalNode&&(0,a.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Total Tasks"}),a.jsx("span",{className:"text-sm font-semibold",children:e.originalNode.totalTasks})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Subcategories"}),a.jsx("span",{className:"text-sm font-semibold",children:e.originalNode.subcategories.length})]})]}),2===e.level&&e.originalNode&&a.jsx("div",{className:"space-y-2 pt-4 border-t",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Tasks"}),a.jsx("span",{className:"text-sm font-semibold",children:e.originalNode.tasks.length})]})})]}),a.jsx("button",{onClick:()=>t(null),className:"w-full mt-4 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Close Details"})]})})]})]})})]})]})}},9819:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var a=s(5153);let r=(0,a.createProxy)(String.raw`/Users/benlittle/Desktop/Stuff/Projects/AXL/OrgGraphUI/app/graph/page.tsx`),{__esModule:l,$$typeof:i}=r,n=r.default,o=n}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[611,286,55,616,563],()=>__webpack_exec__(6920));module.exports=s})();